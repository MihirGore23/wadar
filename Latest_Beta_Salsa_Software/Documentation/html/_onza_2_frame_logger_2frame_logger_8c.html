<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Salsa Demo Programs: /home/jenkins/workspace/SalsaDemos/Onza/FrameLogger/frameLogger.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Salsa Demo Programs
   &#160;<span id="projectnumber">2016-05-03</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_337c3a93990b7dbc7695d613ed19043e.html">jenkins</a></li><li class="navelem"><a class="el" href="dir_66e3ff4cadd89b6e62cafb2105835506.html">workspace</a></li><li class="navelem"><a class="el" href="dir_7afc540aa59c01078fb11ff79218d290.html">SalsaDemos</a></li><li class="navelem"><a class="el" href="dir_b89902c1c2b19a0b2c657274bcbe88bb.html">Onza</a></li><li class="navelem"><a class="el" href="dir_a3ab914d6edc6192c18125a6b43cd610.html">FrameLogger</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">frameLogger.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;getopt.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &quot;radarDSP.h&quot;</code><br />
<code>#include &quot;fex4.h&quot;</code><br />
<code>#include &quot;<a class="el" href="onza_helper_8h_source.html">../Helpers/onzaHelper.h</a>&quot;</code><br />
</div>
<p><a href="_onza_2_frame_logger_2frame_logger_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3909a8fd57da84e1a5a34be4daa65b39"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_onza_2_frame_logger_2frame_logger_8c.html#a3909a8fd57da84e1a5a34be4daa65b39">OUTPUT_DEBUG</a></td></tr>
<tr class="separator:a3909a8fd57da84e1a5a34be4daa65b39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a188626000fd34de7abbe0dd773e0dd76"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_onza_2_frame_logger_2frame_logger_8c.html#a188626000fd34de7abbe0dd773e0dd76">CAPE_NAME</a>&#160;&#160;&#160;&quot;Onza&quot;</td></tr>
<tr class="separator:a188626000fd34de7abbe0dd773e0dd76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25ff6761427334ccbbb446d88c7ad23c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_onza_2_frame_logger_2frame_logger_8c.html#a25ff6761427334ccbbb446d88c7ad23c">GNUPLOT_SCALED_Y_MIN</a>&#160;&#160;&#160;(0)</td></tr>
<tr class="separator:a25ff6761427334ccbbb446d88c7ad23c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf526e4785eec9e2dfa978a0193db1df"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_onza_2_frame_logger_2frame_logger_8c.html#adf526e4785eec9e2dfa978a0193db1df">GNUPLOT_SCALED_Y_MAX</a>&#160;&#160;&#160;(2047)</td></tr>
<tr class="separator:adf526e4785eec9e2dfa978a0193db1df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedda59985eddc398ecfe6a31894f68be"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_onza_2_frame_logger_2frame_logger_8c.html#aedda59985eddc398ecfe6a31894f68be">GNUPLOT_PRACTICAL_Y_MIN</a>&#160;&#160;&#160;(600)</td></tr>
<tr class="separator:aedda59985eddc398ecfe6a31894f68be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace8ab7eea0129f105520cd984b7bb1c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_onza_2_frame_logger_2frame_logger_8c.html#ace8ab7eea0129f105520cd984b7bb1c0">GNUPLOT_PRACTICAL_Y_MAX</a>&#160;&#160;&#160;(1500)</td></tr>
<tr class="separator:ace8ab7eea0129f105520cd984b7bb1c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5ae07f63d6b390e42068d941038dadf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_onza_2_frame_logger_2frame_logger_8c.html#a5ae07f63d6b390e42068d941038dadf2">Usage</a> ()</td></tr>
<tr class="separator:a5ae07f63d6b390e42068d941038dadf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_onza_2_frame_logger_2frame_logger_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a188626000fd34de7abbe0dd773e0dd76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a188626000fd34de7abbe0dd773e0dd76">&#9670;&nbsp;</a></span>CAPE_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CAPE_NAME&#160;&#160;&#160;&quot;Onza&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html#l00118">118</a> of file <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html">frameLogger.c</a>.</p>

</div>
</div>
<a id="ace8ab7eea0129f105520cd984b7bb1c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace8ab7eea0129f105520cd984b7bb1c0">&#9670;&nbsp;</a></span>GNUPLOT_PRACTICAL_Y_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GNUPLOT_PRACTICAL_Y_MAX&#160;&#160;&#160;(1500)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html#l00131">131</a> of file <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html">frameLogger.c</a>.</p>

</div>
</div>
<a id="aedda59985eddc398ecfe6a31894f68be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedda59985eddc398ecfe6a31894f68be">&#9670;&nbsp;</a></span>GNUPLOT_PRACTICAL_Y_MIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GNUPLOT_PRACTICAL_Y_MIN&#160;&#160;&#160;(600)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html#l00130">130</a> of file <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html">frameLogger.c</a>.</p>

</div>
</div>
<a id="adf526e4785eec9e2dfa978a0193db1df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf526e4785eec9e2dfa978a0193db1df">&#9670;&nbsp;</a></span>GNUPLOT_SCALED_Y_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GNUPLOT_SCALED_Y_MAX&#160;&#160;&#160;(2047)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html#l00124">124</a> of file <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html">frameLogger.c</a>.</p>

</div>
</div>
<a id="a25ff6761427334ccbbb446d88c7ad23c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25ff6761427334ccbbb446d88c7ad23c">&#9670;&nbsp;</a></span>GNUPLOT_SCALED_Y_MIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GNUPLOT_SCALED_Y_MIN&#160;&#160;&#160;(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html#l00123">123</a> of file <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html">frameLogger.c</a>.</p>

</div>
</div>
<a id="a3909a8fd57da84e1a5a34be4daa65b39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3909a8fd57da84e1a5a34be4daa65b39">&#9670;&nbsp;</a></span>OUTPUT_DEBUG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OUTPUT_DEBUG</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="anchor" id="bbb_onza_framelogger_demo"></a> </p><h1>FrameLogger</h1>
<p>FrameLogger is a simple program used to produce binary data log files; in other words, this is a tool to help log radar frames for post-processing.</p>
<h2>Hardware Setup</h2>
<p>Using a BeagleBone Black + Onza cape</p>
<h2>Demonstration Code</h2>
<p>The data log is organized as: </p><pre class="fragment">[PRF]
[SampleDelay]
[FS]
[#samples]
[#frames]
[frame_0]
[frame_1]
[frame_2]
...
[frame_N-1]

where...

[PRF]              - Pulse Repetition Frequency (PRF) used
[SampleDelay]      - Sample delay indicates the delay at start of frame
[FS]               - Measured sampling rate (which is fixed on X4)
[#samples]         - Number of samples in a radar frame (type is int)
[#frames]          - Total number of frames (type is int)
[frame_n]          - Array of radar counter values, where the length is #samples (of type float)
</pre><p>When experimenting, the user should make sure this and the corresponding viewer program use the <em>same</em> stage1.json and stage2.json files.</p>
<pre class="fragment">Usage: FrameLogger [-option(s)]
where options include:
-g                    - Enable Gnuplot of radar frames
-l [log file]         - Specify dataLog filename
-n [num trials]       - Specify number of trials to run
-d [delay]            - Specify processing delay in microseconds
</pre><p>Example user session: </p><pre class="fragment"># ./FrameLogger -l testLog1 -g
Starting radar loop: (#trials = 400)
........................................ 10.00%
........................................ 20.00%
........................................ 30.00%
........................................ 40.00%
........................................ 50.00%
........................................ 60.00%
........................................ 70.00%
........................................ 80.00%
........................................ 90.00%
........................................100.00%
</pre><p>The example session produces a binary file, testLog1, that can then be used by other tools which can play back and process the data.</p>
<p>There is an indicated area (in the code) where the user could add custom DSP which could effect the frames. One example use might be to move the frame based on how the data is processed. In the current form, there is signal normalization and a simple delay added.</p>
<p>This program is also intended to be used as a basis for <em>user</em> customization. Often, collecting data is performed in the field; it can be difficult to produce realistic data in an office environment. Using the data log concept for field data collection and later post-processing playback can save time.</p>
<dl class="section note"><dt>Note</dt><dd>Using the Gnuplot during data collection can slow the framerate. Typically, it is easier to just collect data without plotting it.</dd></dl>
<dl class="section user"><dt>Environment</dt><dd>BeagleBone Black + Onza cape</dd></dl>
<dl class="section user"><dt>Compiler</dt><dd>GNU GCC</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Justin Hadella</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>2016 by FlatEarth, Inc </dd></dl>

<p class="definition">Definition at line <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html#l00111">111</a> of file <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html">frameLogger.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html#l00159">159</a> of file <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html">frameLogger.c</a>.</p>

</div>
</div>
<a id="a5ae07f63d6b390e42068d941038dadf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ae07f63d6b390e42068d941038dadf2">&#9670;&nbsp;</a></span>Usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Usage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html#l00143">143</a> of file <a class="el" href="_onza_2_frame_logger_2frame_logger_8c_source.html">frameLogger.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 6 2019 16:32:47 for Salsa Demo Programs by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
